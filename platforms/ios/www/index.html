<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
       <!--  <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com *.ionic.io *.openstreetmap.org; style-src 'self' 'unsafe-inline'; media-src *; img-src *; script-src 'self' 'unsafe-inline' 'unsafe-eval'"> -->
        <!-- css & font libraries  -->
        <!-- <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css" /> -->
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.css" />
        <link rel="stylesheet" type="text/css" href="css/leaflet-master.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="css/slick.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" media="screen and (max-device-width: 736px)" href="css/mobile.css" />
         <!-- main css -->
        <!-- <link rel="stylesheet" type="text/css" href="css/index.css" /> -->

        <!-- javascript libraries -->
        <script type="text/javascript" src="plugins/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" src="plugins/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="plugins/leaflet-master.js"></script>
        <script type="text/javascript" src="plugins/slick.js"></script>
        <!-- <script type="text/javascript" src="js/MarkersOfCurrentView.js"></script> -->
        <title>WellStreet</title>
    </head>

    <body>
         <!-- page for user logining -->
        <div id="login_page" data-role="page">
            <div data-role="main" class="ui-content">
                <div class="bg-wrap"></div>
                <div class="logo-wrap text-center">
                    <img src="img/wellstreet-logo.png"></img>
                </div>
                <div class="btn-wrap">
                    <a id="register_btn" name="register_btn" class="btn btn-large btn-block" href="#" onclick="changePage('register_page','slideup')">Create an Account</a>
                    <a id="login_btn" name="login_btn" data-transition="slideup" class="btn btn-large btn-block" href="#" onclick="changePage('category_page','slideup')">Login In</a>
                </div>
            </div>
        </div>

        <!-- page for registration -->
        <div id="register_page" data-role="page">
            <div data-role="header" class="ui-header" position="fixed">
                <a href="#" onclick="slideBack('login_page');return false;">
                    <i class="icon icon-2x icon-arrow-left"></i>
                </a>
                <h1>Log In</h1>
                <a href="#" class="delete-btn" style="display:none;" onclick="toggleLoginContent()">
                    <i class="icon icon-2x icon-delete" ></i>
                </a>
            </div>

            <div data-role="main" class="ui-content">
                <div class="bg-wrap"></div>
                 <div class="row email-login-wrap">
                    <p>Use your email:</p>
                    <form id="register-form">
                        <input type="email" id="register_email" placeholder="Email">
                        <div class="login-inner-wrap" style="display:none;">
                            <input type="password" id="register_password" placeholder="Password">
                            <button type="button" id="register_sub" >Log In</button>
                        </div>
                    </form>
                </div>
                <div class="row social-login-wrap">
                    <p>Or qucikly sign up with:</p>
                    <a id="register_fb_btn" name="register_fb_btn" class="btn btn-large btn-block">Facebook</a>
                    <a id="register_google_btn" name="register_google_btn" class="btn btn-large btn-block">Google</a>
                </div>
               <!--  <div class="text-center">
                    <p>By signing up, I agree to WellStreet's Terms of Service, Privacy Policy, Guest Refund Policy, and Host Guarantee Terms.</p>
                </div> -->
            </div>
        </div>
        <!-- first load page showing a list of categories -->
        <div id="category_page" data-role="page">
            <!-- header -->
            <div data-role="header"  class="ui-header" position="fixed">
                <a href="#" onclick="slideBack('login_page')">
                    <i class="icon icon-2x icon-arrow-left"></i>
                </a>
               
                <a href="#main_right_menu">
                    <i class="icon icon-2x icon-bars"></i>
                </a>
            </div>

            <!-- content -->
            <div data-role="main" class="ui-content">
                <div id="main_content" class="main_content">
                    <div class="row">
                        <a href="#" id="acupuncturist" data-transition="slide" onClick="startLoadMapPage(this.id,addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Acupuncturist</p>
                                </div>
                            </div>
                            
                        </a>

                        <a href="#" id="allergy" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Allergy</p>
                                </div>
                            </div>
                            
                        </a>

                        <a href="#" id="aromatherapist" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Aromatherapist</p>
                                </div>
                            </div>
                            
                        </a>

                        <a href="#" id="ciropodist" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Ciropodist</p>
                                </div>
                            </div>
                          
                        </a>

                        <a href="#" id="chiropractor" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Chiropractor</p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
       
        <!--  page for showing the map -->
        <div id="map_page" data-role="page">
            <div class="ui-header" data-role="header" position="fixed">
                <a href="#" onclick="slideBack('category_page',resetMapPage())">
                    <i class="icon icon-2x icon-arrow-left"></i>
                </a>
                <!-- <h1 onclick="showSearchWrap();return false;">Search</h1> -->
                <a href="#" onClick="toggleContent();return false;">
                    <i class="icon icon-2x icon-location"></i>
                </a>
            </div>
            <div data-role="main" class="ui-content">
                <div class="loading_wrap"></div>
                <div class="search_wrap">
                        <div class="row search_input_wrap">
                            <div class="col-xs-10">
                                <form>
                                    <input tpye="search" placeholder="Search"/>
                                </form>
                            </div>
                            <div class="col-xs-2">
                                <a href="#" class="btn" onclick="hideSearchWrap();return false;">Cancel</a>
                            </div>

                        </div>
                </div>
               <!--  <div class="twowraps-container"> -->
                <div class="map-wrap">
                    <div class="overlay" onClick=""></div>
                    <div class="search_content">
                        <div class="input_wrap">
                            <form id="search_form">
                                <div class="form-group has-feedback right-feedback">
                                    <input type="search" id="search_input" class="form-control" results=5 placeholder="Search" onfocus="searchFocused()">
                                   <!--  <span  class="form-control-feedback" id="location_btn">
                                        <i class="icon icon-2x icon-location"></i>
                                    </span> -->
                                    </input>
                                </div>
                                <ul id="search_history_list">
                                    <li>1</li>
                                    <li>2</li>
                                    <li>3</li>
                                </ul>
                            </form>
                        </div>
                      <!--   <div class="timepicker_wrap">
                            <div class="container">
                            <div class="row">
                                    <div class="col-xs-6">
                                        <button>Date</button>
                                    </div>
                                    <div class="col-xs-6">
                                    <button>Time</button>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>
                        </div>
                        <div class="arrow_wrap">
                            <a herf="#" class="ui-btn no-border">Select Time</a>
                        </div> -->
                    </div>
                    <div id="map"></div>
                    <div id="detail_slider"></div>
                    <div id="category_slider">
                        <div class="detail_content text-center" data-index='0' data-type="acupuncturist">Acupuncturist</div>
                        <div class="detail_content text-center" data-index='1' data-type="allergy">allergy</div>
                        <div class="detail_content text-center" data-index='2' data-type="aromatherapist">Aromatherapist</div>
                        <div class="detail_content text-center" data-index='3' data-type="ciropodist">Ciropodist</div>
                        <div class="detail_content text-center" data-index='4' data-type="chiropractor">Chiropractor</div>
                    </div>
                    <div class="filter-wrap">
                        <button class="btn btn-large btn-block" onclick="toggleFilter()">Done</button>
                    </div>
                </div>
                <div class="list-wrap">
                    <div id="therapy_list">
                    </div>
                </div>
           <!--  </div> -->
           </div>
        </div>

        <!-- page for showing the profile of selected therapy -->
        <div id="profile_page" data-role="page">
            <div data-role="header"  class="ui-header" position="fixed">
                <a href="#" class="header-back-btn" onclick="slideBack('map_page'); $detailslider.slick('refresh');">Back</i></a>
                <h1>
                    <label class="therapy_county"></label>
                    <label class="therapy_city"></label>
                </h1>
                <a href="#" class="menu_btn">Menu</a>
            </div>
            <div role="main" class="ui-content">
                <div class="therapy_details text-center">
                    <h3 class="therapy_name"></h3>
                    <label class="therapy_address"></label> 
                    <label class="therapy_tel"></label>
                    <label class="therapy_rating"></label>
                    <div class="therapy_openhour"></div>
                </div>
            </div>
        </div>
    
    <script type="text/javascript" src="cordova.js"></script>
    <script src="plugins/com.phonegap.plugins.sqlite/www/SQLitePlugin.js"></script>

    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/global.js"></script>
    <script type="text/javascript" src="js/json_array.min.js"></script>
    <script type="text/javascript" src="js/noClickDelay.js"></script>
    <script type="text/javascript" src="js/swipe.js"></script>
    <script type="text/javascript" src="js/customMarker.js"></script>
    <script type="text/javascript" src="js/mapInitial.js"></script>
    <script type="text/javascript">
        

       
        var loop_number = 0;
        // function changeBackgroundImage()
        // {
        //      var numberOfImages = [1, 2];
        //      $("#login_page").css("background","url(img/b" + numberOfImages[loop_number] + ".png)");
        //      $("#register_page").css("background","url(img/b" + numberOfImages[loop_number] + ".png)");

        //      loop_number ++;

        //      if(loop_number == numberOfImages.length)
        //         loop_number = 0;
        // }
        $(document).ready(function()
        {    
             navigator.geolocation.getCurrentPosition(GPSonSuccess, GPSonError);
            //initial the page with noClickDelay() that the inner elements wont have delay in click event
            $("#login_page").noClickDelay();  
            $("#register_page").noClickDelay();
            $("#category_page").noClickDelay();
            $("#map_page").noClickDelay();
            $("#profile_page").noClickDelay();
        })

        $(".arrow_wrap a").tap(function(){
            var text = $(this).text();
            $(this).toggleClass('extend');
            $(this).text( text == "Select Time" ? "Apply Time" : "Select Time");
            $("#search_form").slideToggle(200);
            $(".timepicker_wrap").slideToggle(200);
            $(".overlay").toggle();

        });
    
        $("#search_form").on('submit', function(){
            resetMapSearch();
            console.log('search submitted');
            return false;
        });

        

        $('#register_email').on('focus',function(e){
            if($(".login-inner-wrap").is(":visible")){
                return;
            }
            else{
                $(".social-login-wrap").slideToggle(400);
                $(".login-inner-wrap").slideToggle(400);
                $(".ui-header .delete-btn").fadeIn(200);
            }
        });
        function toggleFilter(){
            $(".filter-wrap").toggleClass('toggle');

        }
        function toggleLoginContent(){
             if($(".login-inner-wrap").is(":visible")){
                $('#register_email').blur();
                $(".social-login-wrap").slideToggle(400);
                $(".login-inner-wrap").slideToggle(400);
                $(".ui-header .delete-btn").fadeOut(200);
            }
            else{
                return;
            }
        }
        function GPSonSuccess(position)
        {
            // latutude and longitude are declared in Global.js
            CurrentLocation[0] = position.coords.latitude.toFixed(6);
            CurrentLocation[1] = position.coords.longitude.toFixed(6);
        }

        function GPSonError(e)
        {
            alert("Sorry, cannot get your location now.");            
        }
        function showSearchWrap(){
            $(".search_wrap").addClass('appear');
           
            setTimeout(function(){$(".search_wrap form input").focus();},300);
        
            $(".search_wrap form").on('submit', function(e){
                e.preventDefault();
                hideSearchWrap();
            })
        }
        function hideSearchWrap(){
             $(".search_wrap form input").blur();
            $(".search_wrap").removeClass('appear');
        }
    </script>
    </body>
</html>
