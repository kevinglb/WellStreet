<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
       <!--  <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com *.ionic.io *.openstreetmap.org; style-src 'self' 'unsafe-inline'; media-src *; img-src *; script-src 'self' 'unsafe-inline' 'unsafe-eval'"> -->
        <!-- css & font libraries  -->
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.css" />
        <link rel="stylesheet" type="text/css" href="css/leaflet-master.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="css/slick.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" media="screen and (max-device-width: 736px)" href="css/mobile.css" />
        <!-- javascript libraries -->
        <script type="text/javascript" src="plugins/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" src="plugins/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="plugins/jquery-ui.js"></script>
        <script type="text/javascript" src="plugins/jquery-ui-punch.js"></script>
        <script type="text/javascript" src="plugins/leaflet-master.js"></script>
        <script type="text/javascript" src="plugins/slick.js"></script>
        <title>WellStreet</title>
    </head>
    <body>
         <!-- page for user logining -->
        <div id="login_page" data-role="page">
            <div data-role="main" class="ui-content">
                <div class="bg-wrap"></div>
                <div class="logo-wrap text-center">
                    <img src="img/wellstreet-logo.png"></img>
                </div>
                <div class="btn-wrap">
                    <a id="register_btn" name="register_btn" class="btn btn-large btn-block" href="#" onclick="changePage('register_page','slideup')">Create an Account</a>
                    <a id="login_btn" name="login_btn" data-transition="slideup" class="btn btn-large btn-block" href="#" onclick="changePage('category_page','slideup')">Login In</a>
                </div>
            </div>
        </div>

        <!-- page for registration -->
        <div id="register_page" data-role="page">
            <div data-role="header" class="ui-header" position="fixed">
                <a href="#" onclick="slideBack('login_page');return false;">
                    <i class="icon icon-2x icon-arrow-left"></i>
                </a>
                <h1>Log In</h1>
                <a href="#" class="delete-btn" style="display:none;" onclick="toggleLoginContent()">
                    <i class="icon icon-2x icon-delete" ></i>
                </a>
            </div>

            <div data-role="main" class="ui-content">
                <div class="bg-wrap"></div>
                 <div class="row email-login-wrap">
                    <p>Use your email:</p>
                    <form id="register-form">
                        <input type="email" id="register_email" placeholder="Email">
                        <div class="login-inner-wrap" style="display:none;">
                            <input type="password" id="register_password" placeholder="Password">
                            <button type="button" id="register_sub" onclick="changePage('profile_setting_page','slide')">Log In</button>
                        </div>
                    </form>
                </div>
                <div class="row social-login-wrap">
                    <p>Or qucikly sign up with:</p>
                    <a id="register_fb_btn" name="register_fb_btn" class="btn btn-large btn-block">Facebook</a>
                    <a id="register_google_btn" name="register_google_btn" class="btn btn-large btn-block">Google</a>
                </div>
            </div>
        </div>

        <div id="profile_setting_page" data-role="page">
            <div data-role="header" class="ui-header" position="fixed">
                <a href="#" onclick="slideBack('register_page')">
                   <i class="icon icon-2x icon-arrow-left"></i>
                </a>
                <h1>Profile</h1>
                <a href="#">Save</a>
            </div>

            <div data-role="main" class="ui-content">
                <div class="group-form">
                    <label class="text-center form-input-title">Name</label>
                    <div class="form-input-block">
                        <div class="row">
                            <div class="col-xs-3">
                                <label onclick="focusOnInput(this)">First Name</label>
                            </div>
                            <div class="col-xs-9">
                                <input type="text"></input>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-3">
                                <label onclick="focusOnInput(this)">Last Name</label>
                            </div>
                            <div class="col-xs-9">
                                <input type="text"></input>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="group-form">
                    <label class="text-center form-input-title">Private Details</label>
                    <div class="form-input-block">
                        <div class="row">
                            <div class="col-xs-6">
                                <button type="button" value="male">Male</button>
                            </div>
                            <div class="col-xs-6">
                                <button  type="button" value="female">Female</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-3">
                                <label onclick="focusOnInput(this)">Birth Date</label>
                            </div>
                            <div class="col-xs-9">
                                <input type="text"></input>
                            </div>
                        </div>
                         <div class="row">
                            <div class="col-xs-3">
                                <label onclick="focusOnInput(this)">Email</label>
                            </div>
                            <div class="col-xs-9">
                                <input type="email"></input>
                            </div>
                        </div>
                         <div class="row">
                            <div class="col-xs-3">
                                <label onclick="focusOnInput(this)">Phone Numbers</label>
                            </div>
                            <div class="col-xs-9">
                                <input type="number"></input>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- first load page showing a list of categories -->
        <div id="category_page" data-role="page">
            <!-- header -->
            <div data-role="header"  class="ui-header" data-position="fixed">
                <a href="#" onclick="slideBack('login_page')">
                    <i class="icon icon-2x icon-arrow-left"></i>
                </a>
                <a href="#main_right_menu">
                    <i class="icon icon-2x icon-bars"></i>
                </a>
            </div>
            <!-- content -->
            <div data-role="main" class="ui-content">
                <div id="main_content" class="main_content">
                    <div class="row">
                        <a href="#" id="acupuncturist" class="nodelay" data-transition="slide" onClick="startLoadMapPage(this.id,addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Acupuncturist</p>
                                </div>
                            </div>
                            
                        </a>

                        <a href="#" id="allergy" class="nodelay" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Allergy</p>
                                </div>
                            </div>
                            
                        </a>

                        <a href="#" id="aromatherapist" class="nodelay" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Aromatherapist</p>
                                </div>
                            </div>
                            
                        </a>

                        <a href="#" id="ciropodist" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Ciropodist</p>
                                </div>
                            </div>
                          
                        </a>

                        <a href="#" id="chiropractor" data-transition="slide" onClick="startLoadMapPage(this.id, addLayer);return false;">
                            <div class="row list_item">
                                <div class="col-xs-3 vertical-middle text-center">
                                    <img class="main_page_logo" src="img/triage-logo.png"></img>
                                </div>
                                <div class="col-xs-9 vertical-middle">
                                    <p>Chiropractor</p>
                                </div>
                            </div>
                        </a>

                    </div>
                </div>
            </div>
           <!--  <div data-role="footer">        
                <div data-role="navbar" data-theme='b'>
                    <ul>
                        <li><a href="#">One</a></li>
                        <li><a href="#">Two</a></li>
                        <li><a href="#">Three</a></li>
                        <li><a href="#">Four</a></li>
                    </ul>
                </div>
            </div> -->
        </div>
       
        <!--  page for showing the map -->
        <div id="map_page" data-role="page">
            <div class="ui-header" data-role="header" position="fixed">
                <div class="ui-btn-left" >
                    <a href="#" class="back-btn ui-btn nodelay" onclick="slideBack('category_page',resetMapPage())">
                        <i class="icon icon-2x icon-arrow-left"></i>
                    </a>
                    <a href="#" class="cancel-btn ui-btn" style="display:none;" onclick="toggleBottomWrap();return false;">Cancel</a>
                </div>
                <h1 class="ui-title"></h1>
                <!-- <h1 onclick="showSearchWrap();return false;">Search</h1> -->
                <div class="ui-btn-right" >
                    <a href="#" class="ui-btn list-btn" onClick="toggleContent();return false;">
                        <i class="icon icon-2x icon-location"></i>
                    </a>
                </div>
            </div>
            <div data-role="main" class="ui-content">
                <div class="loading_wrap"></div>
                <div class="search_wrap">
                        <div class="row search_input_wrap">
                            <div class="col-xs-10">
                                <form>
                                    <input tpye="search" placeholder="Search"/>
                                </form>
                            </div>
                            <div class="col-xs-2">
                                <a href="#" class="btn" onclick="hideSearchWrap();return false;">Cancel</a>
                            </div>

                        </div>
                </div>
               
                <div class="map-wrap animated">
                    <div class="overlay" onClick=""></div>
                   <!--  <div class="search_content">
                        <div class="input_wrap">
                            <form id="search_form">
                                <div class="form-group has-feedback right-feedback">
                                    <input type="search" id="search_input" class="form-control" results=5 placeholder="Search" onfocus="searchFocused()">
                                    <span  class="form-control-feedback" id="location_btn">
                                        <i class="icon icon-2x icon-location"></i>
                                    </span>
                                    </input>
                                </div>
                                <ul id="search_history_list">
                                    <li>1</li>
                                    <li>2</li>
                                    <li>3</li>
                                </ul>
                            </form>
                        </div>
                        <div class="timepicker_wrap">
                            <div class="container">
                            <div class="row">
                                    <div class="col-xs-6">
                                        <button>Date</button>
                                    </div>
                                    <div class="col-xs-6">
                                    <button>Time</button>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>
                        </div>
                        <div class="arrow_wrap">
                            <a herf="#" class="ui-btn no-border">Select Time</a>
                        </div>
                    </div> -->
                    <div id="map"></div>
                    <!-- <div id="detail_slider"></div> -->
                    <!-- a wrp showing timetable ? -->
                    <div class="detail-wrap animated">
                        <!--  <button id="detail-wrap-trigger" class="wrap-trigger-btn" onclick="triggerBottomWrap(this);"></button> -->
                         <div id="detail_slider"></div>
                         <div class="blank-block"></div>
                         <div class="detail-container">
                            <div class="therapy_details text-center">
                                <label class="therapy_name"></label>
                                <label class="therapy_address"></label>
                            </div>
                            <div class="row fw-btn-wrap">
                                <button type="button" class="ui-btn active" data-target="detail-inner-wrap" onclick="switchFilterContent(this);return false;">Timetable</button>
                                <button type="button" class="ui-btn" data-target="detail-inner-wrap" onclick="switchFilterContent(this);return false;">Services</button>
                            </div>
                            <div class="inner-wrap-container">
                                <div class="detail-timetable-wrap detail-inner-wrap animated">
                                    <div class="detail-inner-item row">
                                        <div class="col-xs-8">
                                            <label>Single Session</label>
                                            <label>Today 5 - 7 pm</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <button class="button" onclick="loadBookingPage(this,loadProfile)">50&#8364</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="detail-service-wrap detail-inner-wrap animated">
                                    <div class="detail-inner-item row">
                                        <div class="col-xs-8">
                                            <label>Iyengar Yoga</label>
                                            <label>Monday and Wednesday</label>
                                        </div>
                                        <div class="col-xs-4">
                                            <button class="button" onclick="loadBookingPage(this,loadProfile)">Book</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                         </div>
                    </div>
                    <!-- a wrap showing the peference filter -->
                </div>
                <div class="category-wrap animated slider-appear">
                    <div id="category_slider">
                        <div class="detail_content text-center" data-index='0' data-type="acupuncturist">
                            <div class="col-xs-9">
                                <label>Acupuncturist</label>
                            </div>
                            <div class="col-xs-3 text-center">
                                <button class="wrap-trigger-btn category-wrap-trigger" onclick="toggleBottomWrap(this);"></button>
                            </div>
                        </div>
                        <div class="detail_content text-center" data-index='1' data-type="allergy">
                            <div class="col-xs-9">
                                <label>Allergy</label>
                            </div>
                            <div class="col-xs-3 text-center">
                                <button class="wrap-trigger-btn category-wrap-trigger" onclick="toggleBottomWrap(this);"></button>
                            </div>
                        </div>
                        <div class="detail_content text-center" data-index='2' data-type="aromatherapist">
                            <div class="col-xs-9">
                                <label>Aromatherapist</label>
                            </div>
                            <div class="col-xs-3 text-center">
                                <button class="wrap-trigger-btn category-wrap-trigger" onclick="toggleBottomWrap(this);"></button>
                            </div>
                        </div>
                        <div class="detail_content text-center" data-index='3' data-type="ciropodist">
                            <div class="col-xs-9">
                                <label>Ciropodist</label>
                            </div>
                            <div class="col-xs-3 text-center">
                                <button class="wrap-trigger-btn category-wrap-trigger" onclick="toggleBottomWrap(this);"></button>
                            </div>
                        </div>
                        <div class="detail_content text-center" data-index='4' data-type="chiropractor">
                            <div class="col-xs-9">
                                <label>Chiropractor</label>
                            </div>
                            <div class="col-xs-3 text-center">
                                <button class="wrap-trigger-btn category-wrap-trigger" onclick="toggleBottomWrap(this);"></button>
                            </div>
                        </div>
                    </div>
                    <div class="blank-block"></div>
                    <div class="category-container">
                        <ul class="sortable" data-role="listview">
                                    <li>Acupuncturist</li>
                                    <li>Allergy</li>
                                    <li>Aromatherapist</li>
                                    <li>Ciropodist</li>
                                    <li>Chiropractor</li>
                                </ul>
                        <button type="button" class="save-btn">Save</button>
                    </div>

                </div>
                <div class="filter-wrap animated">
                    <div class="filter-container">
                        <div class="row fw-btn-wrap">
                            <button type="button" class="ui-btn active" data-target="filter-inner-wrap" onclick="switchFilterContent(this);return false;">Details</button>
                            <button type="button" class="ui-btn" data-target="filter-inner-wrap" onclick="switchFilterContent(this);return false;">Filters</button>
                        </div>
                        <div class="inner-wrap-container">
                            <div class="filter-details-wrap filter-inner-wrap animated">
                                <ul id="filter-level-list" class="filter-list" data-role="listview">
                                    <li data-role="list-divider">Levels</li>
                                    <li>
                                        <div class="row">
                                        <div class="col-xs-9" >Level 1</div>
                                        <div class="col-xs-3 text-right">
                                            <select name="level-1" id="level-1" data-role="slider" data-mini="true">
                                                <option value="off"></option>
                                                <option value="on"></option>
                                            </select>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="row">
                                        <div class="col-xs-9" >Level 2</div>
                                        <div class="col-xs-3 text-right">
                                            <select name="level-2" id="level-2" data-role="slider" data-mini="true">
                                                <option value="off"></option>
                                                <option value="on"></option>
                                            </select>
                                        </div>
                                    </l1>
                                    <li>
                                        <div class="row">
                                        <div class="col-xs-9" >Level 3</div>
                                        <div class="col-xs-3 text-right">
                                            <select name="level-3" id="level-3" data-role="slider" data-mini="true">
                                                <option value="off"></option>
                                                <option value="on"></option>
                                            </select>
                                        </div>
                                    </l1>
                                </ul>

                                <ul id="filter-type-list" class="filter-list" data-role="listview">
                                    <li data-role="list-divider">Types</li>
                                    <li>
                                        <div class="row">
                                        <div class="col-xs-9" >Type 1</div>
                                        <div class="col-xs-3 text-right">
                                            <select name="type-1" id="type-1"  class="disactive" data-role="slider" data-mini="true" onchange="toggleSwitchButton(this)">
                                                <option value="off"></option>
                                                <option value="on"></option>
                                            </select>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="row">
                                        <div class="col-xs-9" >Type 2</div>
                                        <div class="col-xs-3 text-right">
                                            <select name="type-2" id="type-2" data-role="slider" data-mini="true">
                                                <option value="off"></option>
                                                <option value="on"></option>
                                            </select>
                                        </div>
                                    </l1>
                                </ul>
                            </div>
                            <div class="filter-filters-wrap filter-inner-wrap animated">
                                <div>
                                    <label>Distance within</label>
                                    <input type="range" min="1" max="10"></input>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="save-btn">Save</button>
                    </div>
                </div>
                <div class="list-wrap animated">
                    <div class="fw-btn-wrap">
                        <button type="button" class="ui-btn">Dublin 2</button>
                        <button type="button" class="ui-btn">5 - 8 pm</button>
                    </div>
                    <div id="therapy_list">
                    </div>
                </div>
           <!--  </div> -->
           </div>
        </div>
        <!-- page for showing the profile of selected therapy -->
        <div id="therapy_profile_page" data-role="page">
            <div data-role="header"  class="ui-header" position="fixed">
                <a href="#" class="header-back-btn" onclick="slideBack('map_page')">Back</a>
                <h1>
                    <label class="therapy_county"></label>
                    <label class="therapy_city"></label>
                </h1>
                <a href="#" class="menu_btn">Menu</a>
            </div>
            <div role="main" class="ui-content">
                <div class="therapy-details text-center">
                    <h3 class="therapy_name"></h3>
                    <label class="therapy_address"></label> 
                    <label class="therapy_tel"></label>
                    <label class="therapy_rating"></label>
                    <div class="therapy_openhour"></div>
                </div>
            </div>
        </div>
        <div id="booking_page" data-role="page">
                <div data-role="header"  class="ui-header" position="fixed">
                    <div class="ui-btn-left">
                        <a href="#" class=" ui-btn" onclick="slideBack('map_page')">
                            <i class="icon icon-2x icon-arrow-left"></i>
                        </a>
                    </div>
                    <h1 class="ui-title">Confirmation</h1>
                     <div class="ui-btn-right">
                    </div>
                </div>
            <div role="main" class="ui-content">
                <div class="therapy_details text-center">
                    <label class="therapy_name"></label>
                    <label class="therapy_address"></label> 
                </div>

                <div class="service_details container">
                    <div class="col-xs-8">
                        <label class="service_name">Iyengar Yoga</label>
                        <label class="service_no">1 class</label>
                        <label class='service_time'>Today 6 - 7 pm</label>
                    </div>
                    <div class="col-xs-4 service_price_details">
                        <label>Total</label>
                        <label class="service_price">35&#8364</label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="text-center form-input-title">Payment</label>
                    <div class="form-input-block">
                        <div class="row">
                            <div class="col-xs-3">
                                <label onclick="focusOnInput(this)">Paypal</label>
                            </div>
                            <div class="col-xs-9">
                                <input type="text"></input>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <a href="#add_payment_page" data-transition="slide"><label>Add a new Credit Card</label></a>
                            </div>
                           
                        </div>
                    </div>
                </div>

                <p class="notice">By tapping on "Book Now" you agree to pay the total shown and to the <span class="red-text">Terms of Service. Strict</span> Cancellation Policy and <span class="red-text">Guest Refund Policy</span></P>
                <button type="button" class="save-btn">BOOk NOW</button>
            </div>
        </div>
        <!-- page for payment operation-->
        <div id="add_payment_page" data-role="page">
            <div data-role="header"  class="ui-header" position="fixed">
                <div class="ui-btn-left">
                        <a href="#" class=" ui-btn" onclick="slideBack('booking_page')">
                            <i class="icon icon-2x icon-arrow-left"></i>
                        </a>
                    </div>
                    <h1 class="ui-title">Add Payment</h1>
                     <div class="ui-btn-right">
                    </div>
            </div>

            <div role="main" class="ui-content">
                <div class="form-group">
                    <label class="text-center form-input-title">Personal Information</label>
                    <div class="form-input-block">
                        <div class="row">
                            <div class="col-xs-4">
                                <label onclick="focusOnInput(this)">Country</label>
                            </div>
                            <div class="col-xs-8">
                                <input type="text"></input>
                            </div>
                        </div>
                        <div class="row">
                           <div class="col-xs-4">
                                <label onclick="focusOnInput(this)">Postal Code</label>
                            </div>
                            <div class="col-xs-8">
                                <input type="number"></input>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="text-center form-input-title">Credit Card Information</label>
                    <div class="form-input-block">
                        <div class="row">
                            <div class="col-xs-4">
                                <label onclick="focusOnInput(this)">Number</label>
                            </div>
                            <div class="col-xs-8">
                                <input type="number"></input>
                            </div>
                        </div>
                        <div class="row">
                           <div class="col-xs-4">
                                <label onclick="focusOnInput(this)">Expiry</label>
                            </div>
                            <div class="col-xs-8">
                                <input type="number"></input>
                            </div>
                        </div>
                        <div class="row">
                           <div class="col-xs-4">
                                <label onclick="focusOnInput(this)">CCV</label>
                            </div>
                            <div class="col-xs-8">
                                <input type="number"></input>
                            </div>
                        </div>
                    </div>
                </div>

                <button type="button" class="save-btn" onclick="slideBack('booking_page')">Done</button>
            </div>
        </div>

    <script type="text/javascript" src="cordova.js"></script>
    <script src="plugins/com.phonegap.plugins.sqlite/www/SQLitePlugin.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="plugins/sortable.js"></script>
    
    <script type="text/javascript" src="js/global.js"></script>
    <script type="text/javascript" src="js/fastClick.js"></script>
    <script type="text/javascript" src="js/json_array.min.js"></script>
    <!-- <script type="text/javascript" src="js/noClickDelay.js"></script> -->
    <script type="text/javascript" src="js/swipe.js"></script>
    <script type="text/javascript" src="js/customMarker.js"></script>
    <script type="text/javascript" src="js/customIcon.js"></script>
    
    <script type="text/javascript" src="js/mapInitial.js"></script>
    <script type="text/javascript">
    
       
        // var loop_number = 0;
        // // function changeBackgroundImage()
        // // {
        // //      var numberOfImages = [1, 2];
        // //      $("#login_page").css("background","url(img/b" + numberOfImages[loop_number] + ".png)");
        // //      $("#register_page").css("background","url(img/b" + numberOfImages[loop_number] + ".png)");

        // //      loop_number ++;

        // //      if(loop_number == numberOfImages.length)
        // //         loop_number = 0;
        // // }
        $(document).ready(function()
        {    
             navigator.geolocation.getCurrentPosition(GPSonSuccess, GPSonError);
            //initial the page with fastclick that the inner elements wont have delay in click event
            
           

            // $('.sortable').sortable();
            // $('.sortable li').removeClass('ui-corner-bottom');
            // $('ul.sortable').addClass('ui-corner-top')
            //                 .removeClass('ui-corner-all')
            //                 .sortable({
            //                     'containment': 'parent',
            //                     'opacity': 0.6,
            //                     update: function(event, ui) {
            //                     //alert("dropped");
            //                  }
            //     });
        $( "ul.sortable" ).sortable();
        $( "ul.sortable" ).disableSelection();
        //Refresh list to the end of sort to have a correct display -->
        $( "ul.sortable" ).bind( "sortstop", function(event, ui) {
            $('ul.sortable').listview('refresh');
        });

         FastClick.attach(document.body);
            FastClick.attach("#map");
            $('body').bind('focusin focus', function(e){
                e.preventDefault();
            });
        })
        $(".arrow_wrap a").click(function(){
            var text = $(this).text();
            $(this).toggleClass('extend');
            $(this).text( text == "Select Time" ? "Apply Time" : "Select Time");
            $("#search_form").slideToggle(200);
            $(".timepicker_wrap").slideToggle(200);
            $(".overlay").toggle();

        });
        $("#search_form").on('submit', function(){
            resetMapSearch();
            console.log('search submitted');
            return false;
        });
        $('#register_email').on('focus',function(e){
            if($(".login-inner-wrap").is(":visible")){
                return;
            }
            else{
                e.preventDefault();
                $(".social-login-wrap").slideToggle(300);
                $(".login-inner-wrap").slideToggle(300);
                $(".ui-header .delete-btn").fadeIn(300);
                $('#register_email').focus();
            }
        });
        function toggleBottomWrap(element){
            if(element){
                if($(element).hasClass('wrap-trigger-btn')){
                    $(".filter-wrap").toggleClass('toggle');
                    console.log("wrap-trigger-btn");
                }
                else if($(element).hasClass('detail-wrap')){
                    //console.log("wrap");
                    $(element).removeClass('slider-appear').addClass('toggle');
                }
                else if($(element).hasClass('category-wrap')){
                    $(element).removeClass('slider-appear').addClass('toggle');   
                }
                else {
                    return;
                }
                $("#map").click();   
            }
            else{
                if($(".category-wrap").hasClass('toggle')){
                    $(".category-wrap").removeClass('toggle').addClass('slider-appear');
                }
                else if($(".detail-wrap").hasClass('toggle')){
                    $(".detail-wrap").removeClass('toggle').addClass('slider-appear');
                }
                else if($(".filter-wrap").hasClass('toggle')){
                     $(".filter-wrap").toggleClass('toggle');
                }
                $('#map_page .ui-header .ui-title').text('');
                $("#map").click();   
            }
            if ($(".ui-header .cancel-btn").is(":visible") || $(".ui-header .list-btn").is(":hidden") ){
                $(".ui-header .cancel-btn").hide(100);
                $(".ui-header .list-btn").show();
                $(".ui-header .back-btn").show(100);
            }
            else if($(".ui-header .cancel-btn").is(":hidden") || $(".ui-header .list-btn").is(":visible") ){
                $(".ui-header .back-btn").hide();
                $(".ui-header .list-btn").hide();
                $(".ui-header .cancel-btn").show();
            }

        }

        function triggerBottomWrap(element){
            if($(element).hasClass('category-wrap-trigger')){
                $('.category-wrap').removeClass('slider-appear').addClass('toggle');
            }
            else if($(element).hasClass('detail-wrap-trigger')){
                $('.detail-wrap').removeClass('slider-appear').addClass('toggle');
            }
            
            if($(".ui-header .cancel-btn").is(":hidden") || $(".ui-header .list-btn").is(":visible") ){
                $(".ui-header .cancel-btn").show();
                $(".ui-header .list-btn").hide();
                $(".ui-header .back-btn").hide();
            }   
        }

        function toggleLoginContent(){
             if($(".login-inner-wrap").is(":visible")){
                $('#register_email').blur();
                $(".social-login-wrap").slideToggle(300);
                $(".login-inner-wrap").slideToggle(300);
                $(".ui-header .delete-btn").fadeOut(200);
            }
            else{
                return;
            }
        }
        function GPSonSuccess(position)
        {
            // latutude and longitude are declared in Global.js
            CurrentLocation[0] = position.coords.latitude.toFixed(6);
            CurrentLocation[1] = position.coords.longitude.toFixed(6);
        }
        function GPSonError(e)
        {
            alert("Sorry, cannot get your location now.");            
        }
        function showSearchWrap(){
            $(".search_wrap").addClass('appear');
            setTimeout(function(){$(".search_wrap form input").focus();},300);
            $(".search_wrap form").on('submit', function(e){
                e.preventDefault();
                hideSearchWrap();
            })
        }
        function hideSearchWrap(){
             $(".search_wrap form input").blur();
            $(".search_wrap").removeClass('appear');
        }
        function switchFilterContent(element){
            var currentContent = $(element);
            if(currentContent.hasClass("active")){
                return;
            }
            else{
                var target = currentContent.attr("data-target");
                //console.log(target);
                // $(".category-wrap .fw-btn-wrap button").toggleClass('active');
                // $(".category-wrap .filter-type-wrap").toggleClass('toggle');
                // $(".category-wrap .filter-perference-wrap").toggleClass('toggle');
                currentContent.parent(".fw-btn-wrap").children('button').toggleClass('active');
                $('.'+target).toggleClass('toggle');
            }
        }
        //auto focus on the input when the corresponding label is clicked on
        function focusOnInput(element){
            var row = $(element).parent().parent('.row');
            row.find(".ui-input-text").children('input').focus();
        }

        function toggleSwitchButton(element){
            
        }
    </script>
    </body>
</html>
